<div class="content">
    <h2 id="{{test.id}}.{{part.id}}.{{case.id}}">{{test.id}}.{{part.id}} {{case.id}}&nbsp;&nbsp;&nbsp;&nbsp;{{ case.condition }}</h2>
    <h3 class="center-div">Initial Conditions</h3>
    {% include 'init_cond_table.html' %}
    <p class="tiny-text">* Snapshot Tests: Reference initial conditions are computed as mean values over data time histories</p>
    {% include 'test_case_footer.html' %}
    {% include 'test_part_footer.html' %}
</div>
{% if mode != testMode.REFERENCE %}
<div class="content">
    <h3 class="center-div">Manual Test Procedure</h3>
    <ol>
        {% for man_test in case.manual_testing %}
        <li><p>{{ man_test }}</p></li>
        {% endfor %}
    </ol>

    <h3 class="center-div">Automatic Test Procedure</h3>
    {% if case.is_automatic %}
    {% for auto_test in case.automatic_testing %}{{ auto_test }}<br><br>{% endfor %}
    <br>
    <table class="no-outer-borders centered-table">
        <thead>
            <tr>
                <th class="align-left">Flight Controls</th>
                <th>Status</th>
            </tr>
        </thead>
        <tbody>
            {% for control in case.generic_flight_controls %}
            <tr>
                <td class="align-left">{{ control.fc }}</td>
                <td>{{ control.status }}</td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
    <br>
    {% else %}
    No automatic procedure
    {% endif %}

    {% include 'test_case_footer.html' %}
    {% include 'test_part_footer.html' %}
</div>
{% endif %}

{% if mode != testMode.REFERENCE or case.is_snapshot %}
<div class="content">
    {% if mode != testMode.REFERENCE %}
        <h3 class="center-div">Tolerances and Evaluation Criteria</h3>
        <h3>FTD Level 1:</h3>
        {% include 'tolerances_table.html' %}
        <p>Evaluation Criteria to be applied to Overplots figures.</p>
    {% endif %}
<!--    <h3 class="center-div">Expected Results</h3>-->
<!--    <p>It is expected that the test data is within the tolerances of the reference.</p>-->
    {% if case.is_snapshot %}
        <h3 class="center-div">
            {% if mode == testMode.REFERENCE %} Test Results
            {% else %} Expected Results, Test Results and Comparison of Results {% endif %}
        </h3>
        {% include 'snapshot_table.html' %}
    {% endif %}
        {% include 'test_case_footer.html' %}
        {% include 'test_part_footer.html' %}
</div>
{% endif %}

<div class="content">
    {% if not case.is_snapshot %}
    <h3 class="center-div">
        {% if mode == testMode.REFERENCE %} Test Results
        {% else %} Expected Results, Test Results and Comparison of Results {% endif %}
    </h3>
    {% endif %}

    {% for plot in case.plots_base64 %}
        <img class="plot-image" src="data:image/svg;base64,{{ plot }}" alt="Plot Image">
        {% if loop.index0 % 3 == 0 %}
            {% include 'test_case_footer.html' %}
            {% include 'test_part_footer.html' %}
        {% endif %}
    {% endfor %}

    {% if not case.plots_base64 %}
    <p>No plots available.</p>
    {% include 'test_part_footer.html' %}
    {% endif %}
</div>

<div class="content">
    <h3 class="center-div">Notes and Rationales</h3>

    <table class="no-outer-borders">
        <tr>
            <th colspan="2">Notes</th>
        </tr>
        {% for note in case.notes_rationales.notes %}
        <tr>
            <td colspan="2" class="align-left"><p>{{ note }}</p></td>
        </tr>
        {% endfor %}

        <tr>
            <th colspan="2">Rationales (Validation Data)</th>
        </tr>
<!--        <tr>-->
<!--            <td class="align-left"><p>-->
<!--                Rationale 1-->
<!--                (All Subcases)-->
<!--                </p>-->
<!--            </td>-->
<!--            <td class="align-left"><p>In the Hover flight maneuver Vertical Speed values are not reliable due to Rotor Downwash effects. In each current Test SubCases a stable Hover maneuver has been performed.</p></td>-->
<!--        </tr>-->
        {% for rat in case.notes_rationales.rationales_validation_data %}
        <tr>
            <td colspan="2" class="align-left"><p>{{ rat }}</p></td>
        </tr>
        {% endfor %}

        <tr>
            <th colspan="2">Rationales (Results)</th>
        </tr>
        {% for rat in case.notes_rationales.rationales_results %}
        <tr>
            <td colspan="2" class="align-left"><p>{{ rat }}</p></td>
        </tr>
        {% endfor %}
<!--        <tr>-->
<!--            <td colspan="2" class="align-left"><p>No Rationales related to current SubCase are present</p></td>-->
<!--        </tr>-->
    </table>
    {% include 'test_case_footer.html' %}
    {% include 'test_part_footer.html' %}
</div>

